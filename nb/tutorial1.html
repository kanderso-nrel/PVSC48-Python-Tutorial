
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tutorial 1 - Weather Data: Accesing it, understanding it, visualizing it! &#8212; PVSC48-Python-Tutorial  documentation</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet" />
  <link href="../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Tutorial 2 - POA Irradiance" href="tutorial2.html" />
    <link rel="prev" title="Welcome!" href="tutorial0.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    
<a class="navbar-brand" href="../index.html">
<p class="title">PVSC48-Python-Tutorial</p>
</a>

    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="tutorial0.html">
  Welcome!
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="current reference internal nav-link" href="#">
  Tutorial 1 - Weather Data: Accesing it, understanding it, visualizing it!
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="tutorial2.html">
  Tutorial 2 - POA Irradiance
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="tutorial3.html">
  Tutorial 3 - Module Temperature
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="tutorial4.html">
  Tutorial 4 - PV Module Performance
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    
  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Weather-Data-and-PV">
   Weather Data and PV
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Typical-Meteorological-Year">
   Typical Meteorological Year
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Import-Libraries">
   Import Libraries
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Reading-a-TMY-dataset-with-pvlib">
   Reading a TMY dataset with pvlib
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Irradiance">
   Irradiance
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Wind">
   Wind
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Air-temperature">
   Air temperature
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Downselect-columns">
   Downselect columns
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Plotting-time-series-data-with-pandas-and-matplotlib">
   Plotting time series data with pandas and matplotlib
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#Plotting-Irradiance">
     Plotting Irradiance
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#Plotting-Temperature">
     Plotting Temperature
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#Plotting-Wind-speed">
     Plotting Wind speed
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Aggregating-hourly-data-to-monthly-summaries">
   Aggregating hourly data to monthly summaries
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Where-to-get-Solar-Irradiance-Data">
   Where to get Solar Irradiance Data
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#Fetching-TMYs-from-the-NSRDB">
     Fetching TMYs from the NSRDB
    </a>
   </li>
  </ul>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 7ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<p><img alt="tutorialpromo" src="../_images/tutorial_banner.PNG" /></p>
<div class="section" id="Tutorial-1---Weather-Data:-Accesing-it,-understanding-it,-visualizing-it!">
<h1>Tutorial 1 - Weather Data: Accesing it, understanding it, visualizing it!<a class="headerlink" href="#Tutorial-1---Weather-Data:-Accesing-it,-understanding-it,-visualizing-it!" title="Permalink to this headline">¶</a></h1>
<p>This notebook explores a standard type of weather data, the typical meteorological year (TMY), and how to summarize it with Python and <a class="reference external" href="https://pandas.pydata.org/">Pandas</a>.</p>
<p><img alt="tutorial_1_overview" src="../_images/tutorial_1_overview.PNG" /></p>
<p>Steps: - <a class="reference external" href="#Weather-Data-&amp;-PV">Weather data in PV performance models</a> - Looking at a sample weather data file - Where to get weather data from? - Weather data to API</p>
<p>PV Concepts: - TMY - GHI, DNI, DHI - DryBulb, Wspd - Irradiance vs. Insolation</p>
<p>Python Concepts: - Exploring a Pandas dataframe (<code class="docutils literal notranslate"><span class="pre">df</span></code>): <code class="docutils literal notranslate"><span class="pre">len()</span></code>, <code class="docutils literal notranslate"><span class="pre">df.head()</span></code>, <code class="docutils literal notranslate"><span class="pre">df.keys()</span></code> - <a class="reference external" href="https://pvlib-python.readthedocs.io/en/stable/api.html#io-tools">pvlib input-output tools</a> - Ploting a Pandas dataframe (<code class="docutils literal notranslate"><span class="pre">df</span></code>): <code class="docutils literal notranslate"><span class="pre">df.plot()</span></code> - Aggregating data in a dataframe (<code class="docutils literal notranslate"><span class="pre">df</span></code>): <code class="docutils literal notranslate"><span class="pre">df.resample(freq).sum()</span></code> - Getting NREL irradiance data from the web based API using pvlib</p>
<div class="section" id="Weather-Data-and-PV">
<h2>Weather Data and PV<a class="headerlink" href="#Weather-Data-and-PV" title="Permalink to this headline">¶</a></h2>
<p>Weather and irradiance data are used as input to PV performance models.</p>
<p><img alt="tutorial_1_SRRL" src="../_images/tutorial_1_SRRL.PNG" /></p>
<p>These data are directly measured, derived from measured data, or simulated using a stochastic model.</p>
</div>
<div class="section" id="Typical-Meteorological-Year">
<h2>Typical Meteorological Year<a class="headerlink" href="#Typical-Meteorological-Year" title="Permalink to this headline">¶</a></h2>
<p>TMY datasets are intended to represent the weather for a typical year at a given location.</p>
<p>TMY datasets provide hourly <strong>solar irradiance</strong>, <strong>air temperature</strong>, <strong>wind speed</strong>, and other weather measurements for a hypothetical year that represents more or less a “median year” for solar resource.</p>
<p><img alt="tutorial_1_tmy3_example" src="../_images/tutorial_1_tmy3_example.PNG" /></p>
<p>TMY datasets are created by selecting individual months out of an extended period of weather measurememts (say, 20 years of data) to construct a single year’s worth of data. There are several methods for selecting which months to include, but the general idea is to calculate monthly summary statistics and take the month that lies in the middle of the distribution. For example, no two Januaries will be exactly the same, so summing the total solar irradiance for each January will give a <a class="reference external" href="https://en.wikipedia.org/wiki/Normal_distribution">normal
distribution</a>, and the month that falls closest to the <a class="reference external" href="https://en.wikipedia.org/wiki/Median">median</a> is chosen as the representative month. The same process is followed for February, March, and so on, and all twelve representative months are stitched together into a year-long dataset.</p>
<p>The oldest TMYs were calculated using data from the nearest weather station (airports and such). Today, it’s common to use TMYs calculated using simulated weather data from satellite imagery because of the improved spatial resolution.</p>
<p>To get a better feel for TMY data, we’ll first explore an example TMY dataset that is bundled with pvlib.</p>
</div>
<div class="section" id="Import-Libraries">
<h2>Import Libraries<a class="headerlink" href="#Import-Libraries" title="Permalink to this headline">¶</a></h2>
<p>In Python, some commands are builtin like <code class="docutils literal notranslate"><span class="pre">print()</span></code> but others must be imported before they can be used. For this notebook we’re going to import three packages: * <a class="reference external" href="https://pvlib-python.readthedocs.io/en/stable/">pvlib</a> - library for simulating performance of photovoltaic energy systems. * <a class="reference external" href="https://pandas.pydata.org/">pandas</a> - analysis tool for timeseries and tabular data * <a class="reference external" href="https://matplotlib.org/">matplotlib</a> - data visualization for Python</p>
<p>Some Python modules are part of the <a class="reference external" href="https://docs.python.org/3/library/index.html">standard library</a>, but are not imported with builtins. We’ll use the <code class="docutils literal notranslate"><span class="pre">pathlib</span></code> module which is useful for accessing files and folders.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">pvlib</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>  <span class="c1"># for data wrangling</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>  <span class="c1"># for visualization</span>
<span class="kn">import</span> <span class="nn">pathlib</span>  <span class="c1"># for finding the example dataset</span>
</pre></div>
</div>
</div>
<p>Query which version you are using of pvlib:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="n">pvlib</span><span class="o">.</span><span class="n">__version__</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
0.8.0
</pre></div></div>
</div>
</div>
<div class="section" id="Reading-a-TMY-dataset-with-pvlib">
<h2>Reading a TMY dataset with pvlib<a class="headerlink" href="#Reading-a-TMY-dataset-with-pvlib" title="Permalink to this headline">¶</a></h2>
<p>First, we’ll read the TMY dataset with <code class="docutils literal notranslate"><span class="pre">`pvlib.iotools.read_tmy3()</span></code> &lt;<a class="reference external" href="https://pvlib-python.readthedocs.io/en/stable/generated/pvlib.iotools.read_tmy3.html">https://pvlib-python.readthedocs.io/en/stable/generated/pvlib.iotools.read_tmy3.html</a>&gt;`__ which returns a <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html">Pandas DataFrame</a> of the timeseries weather data and a second output with a Python dictionary of the TMY metadata like longitude, latitude, elevation, etc.</p>
<p>We will use the Python <code class="docutils literal notranslate"><span class="pre">`pathlib</span></code> &lt;<a class="reference external" href="https://docs.python.org/3/library/pathlib.html">https://docs.python.org/3/library/pathlib.html</a>&gt;`__ to get the path to the <code class="docutils literal notranslate"><span class="pre">'data'</span></code> directory which comes with the <code class="docutils literal notranslate"><span class="pre">pvlib</span></code> package. Then we can use the slash operator, <code class="docutils literal notranslate"><span class="pre">/</span></code> to make the full path to the TMY file.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">DATA_DIR</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">pvlib</span><span class="o">.</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s1">&#39;data&#39;</span>
<span class="n">df_tmy</span><span class="p">,</span> <span class="n">meta_dict</span> <span class="o">=</span> <span class="n">pvlib</span><span class="o">.</span><span class="n">iotools</span><span class="o">.</span><span class="n">read_tmy3</span><span class="p">(</span><span class="n">DATA_DIR</span> <span class="o">/</span> <span class="s1">&#39;723170TYA.CSV&#39;</span><span class="p">,</span> <span class="n">coerce_year</span><span class="o">=</span><span class="mi">1990</span><span class="p">)</span>
<span class="n">meta_dict</span>  <span class="c1"># display the dictionary of metadata</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>{&#39;USAF&#39;: 723170,
 &#39;Name&#39;: &#39;&quot;GREENSBORO PIEDMONT TRIAD INT&quot;&#39;,
 &#39;State&#39;: &#39;NC&#39;,
 &#39;TZ&#39;: -5.0,
 &#39;latitude&#39;: 36.1,
 &#39;longitude&#39;: -79.95,
 &#39;altitude&#39;: 273.0}
</pre></div>
</div>
</div>
<p>This dataset follows the standard format of handling timeseries data with pandas – one row per timestamp, one column per measurement type. Because TMY files represent one year of data (no leap years), that means they’ll have 8760 rows. The number of columns can vary depending on the source of the data.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of rows:&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">df_tmy</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of columns:&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">df_tmy</span><span class="o">.</span><span class="n">columns</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Number of rows: 8760
Number of columns: 71
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">df_tmy</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>Index([&#39;Date (MM/DD/YYYY)&#39;, &#39;Time (HH:MM)&#39;, &#39;ETR&#39;, &#39;ETRN&#39;, &#39;GHI&#39;, &#39;GHISource&#39;,
       &#39;GHIUncertainty&#39;, &#39;DNI&#39;, &#39;DNISource&#39;, &#39;DNIUncertainty&#39;, &#39;DHI&#39;,
       &#39;DHISource&#39;, &#39;DHIUncertainty&#39;, &#39;GHillum&#39;, &#39;GHillumSource&#39;,
       &#39;GHillumUncertainty&#39;, &#39;DNillum&#39;, &#39;DNillumSource&#39;, &#39;DNillumUncertainty&#39;,
       &#39;DHillum&#39;, &#39;DHillumSource&#39;, &#39;DHillumUncertainty&#39;, &#39;Zenithlum&#39;,
       &#39;ZenithlumSource&#39;, &#39;ZenithlumUncertainty&#39;, &#39;TotCld&#39;, &#39;TotCldSource&#39;,
       &#39;TotCldUncertainty&#39;, &#39;OpqCld&#39;, &#39;OpqCldSource&#39;, &#39;OpqCldUncertainty&#39;,
       &#39;DryBulb&#39;, &#39;DryBulbSource&#39;, &#39;DryBulbUncertainty&#39;, &#39;DewPoint&#39;,
       &#39;DewPointSource&#39;, &#39;DewPointUncertainty&#39;, &#39;RHum&#39;, &#39;RHumSource&#39;,
       &#39;RHumUncertainty&#39;, &#39;Pressure&#39;, &#39;PressureSource&#39;, &#39;PressureUncertainty&#39;,
       &#39;Wdir&#39;, &#39;WdirSource&#39;, &#39;WdirUncertainty&#39;, &#39;Wspd&#39;, &#39;WspdSource&#39;,
       &#39;WspdUncertainty&#39;, &#39;Hvis&#39;, &#39;HvisSource&#39;, &#39;HvisUncertainty&#39;, &#39;CeilHgt&#39;,
       &#39;CeilHgtSource&#39;, &#39;CeilHgtUncertainty&#39;, &#39;Pwat&#39;, &#39;PwatSource&#39;,
       &#39;PwatUncertainty&#39;, &#39;AOD&#39;, &#39;AODSource&#39;, &#39;AODUncertainty&#39;, &#39;Alb&#39;,
       &#39;AlbSource&#39;, &#39;AlbUncertainty&#39;, &#39;Lprecipdepth&#39;, &#39;Lprecipquantity&#39;,
       &#39;LprecipSource&#39;, &#39;LprecipUncertainty&#39;, &#39;PresWth&#39;, &#39;PresWthSource&#39;,
       &#39;PresWthUncertainty&#39;],
      dtype=&#39;object&#39;)
</pre></div>
</div>
</div>
<p>71 columns is quite a lot! For now, let’s focus just on the ones that are most important for PV modeling – the irradiance, temperature, and wind speed columns, and extract them into a new DataFrame.</p>
</div>
<div class="section" id="Irradiance">
<h2>Irradiance<a class="headerlink" href="#Irradiance" title="Permalink to this headline">¶</a></h2>
<p>Irradiance is an instantaneous measurement of solar power over some area. For practical purposes of measurement and interpretation, irradiance is expressed and separated into different components.</p>
<p><img alt="tutorial_1_DNIDHIGHI" src="../_images/tutorial_1_DNIDHIGHI.PNG" /></p>
<p>The units of irradiance are watts per square meter.</p>
</div>
<div class="section" id="Wind">
<h2>Wind<a class="headerlink" href="#Wind" title="Permalink to this headline">¶</a></h2>
<p>Wind speed is measured with an anemometer. The most common type is a the cup-type anemometer, shown on the right side of the picture below. The number of rotations per time interval is used to calculate the wind speed. The vane on the left is used to measure the direction of the wind. Wind direction is reported as the direction from which the wind is blowing.</p>
<p><a class="reference external" href="https://pvpmc.sandia.gov/modeling-steps/1-weather-design-inputs/weather-observations/wind-speed-and-direction/"><img alt="anemometer" src="https://pvpmc.sandia.gov/wp-content/uploads/2012/04/anemometer.jpg" /></a></p>
</div>
<div class="section" id="Air-temperature">
<h2>Air temperature<a class="headerlink" href="#Air-temperature" title="Permalink to this headline">¶</a></h2>
<p>Also known as dry-bulb temperature, is the temperature of the ambient air when the measurement device is shielded from radiation and moisture. The most common method of air temperature measurement uses a resistive temperature device (RTD) or thermocouple within a radiation shield. The shield blocks sunlight from reaching the sensor (avoiding radiative heating), yet allows natural air flow around the sensor. More accurate temperature measurement devices utilize a shield which forces air across
the sensor.</p>
<p>Air temperature is typically measured on the Celsius scale.</p>
<p>Air temperature plays a large role in PV system performance as PV modules and inverters are cooled convectively by the surrounding air.</p>
<p><a class="reference external" href="https://pvpmc.sandia.gov/modeling-steps/1-weather-design-inputs/weather-observations/air-temperature/"><img alt="AmbTempSensor" src="https://pvpmc.sandia.gov/wp-content/uploads/2012/04/AmbTemp.jpg" /></a></p>
</div>
<div class="section" id="Downselect-columns">
<h2>Downselect columns<a class="headerlink" href="#Downselect-columns" title="Permalink to this headline">¶</a></h2>
<p>There are a lot more weather data in that file that you can access. To investigate all the column headers, use <code class="docutils literal notranslate"><span class="pre">.keys</span></code>. Always read the <a class="reference external" href="https://www.nrel.gov/docs/fy08osti/43156.pdf">Instruction Manual</a> for the weather files to get more details on how the data is aggregated, units, etc.</p>
<p>At this point we are interested in GHI, DHI, DNI, DryBulb and Wind Speed. For this NREL TMY3 dataset the units of irradiance are W/m², dry bulb temperature is in °C, and wind speed is m/s.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># GHI, DHI, DNI are irradiance measurements</span>
<span class="c1"># DryBulb is the &quot;dry-bulb&quot; (ambient) temperature</span>
<span class="c1"># Wspd is wind speed</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df_tmy</span><span class="p">[[</span><span class="s1">&#39;GHI&#39;</span><span class="p">,</span> <span class="s1">&#39;DHI&#39;</span><span class="p">,</span> <span class="s1">&#39;DNI&#39;</span><span class="p">,</span> <span class="s1">&#39;DryBulb&#39;</span><span class="p">,</span> <span class="s1">&#39;Wspd&#39;</span><span class="p">]]</span>
<span class="c1"># show the first 15 rows:</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>GHI</th>
      <th>DHI</th>
      <th>DNI</th>
      <th>DryBulb</th>
      <th>Wspd</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1990-01-01 01:00:00-05:00</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>10.0</td>
      <td>6.2</td>
    </tr>
    <tr>
      <th>1990-01-01 02:00:00-05:00</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>10.0</td>
      <td>5.2</td>
    </tr>
    <tr>
      <th>1990-01-01 03:00:00-05:00</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>10.0</td>
      <td>5.7</td>
    </tr>
    <tr>
      <th>1990-01-01 04:00:00-05:00</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>10.0</td>
      <td>5.7</td>
    </tr>
    <tr>
      <th>1990-01-01 05:00:00-05:00</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>10.0</td>
      <td>5.2</td>
    </tr>
    <tr>
      <th>1990-01-01 06:00:00-05:00</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>10.0</td>
      <td>4.1</td>
    </tr>
    <tr>
      <th>1990-01-01 07:00:00-05:00</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>10.0</td>
      <td>4.1</td>
    </tr>
    <tr>
      <th>1990-01-01 08:00:00-05:00</th>
      <td>9</td>
      <td>9</td>
      <td>1</td>
      <td>10.0</td>
      <td>5.2</td>
    </tr>
    <tr>
      <th>1990-01-01 09:00:00-05:00</th>
      <td>46</td>
      <td>46</td>
      <td>3</td>
      <td>10.0</td>
      <td>5.2</td>
    </tr>
    <tr>
      <th>1990-01-01 10:00:00-05:00</th>
      <td>79</td>
      <td>78</td>
      <td>4</td>
      <td>10.6</td>
      <td>5.2</td>
    </tr>
    <tr>
      <th>1990-01-01 11:00:00-05:00</th>
      <td>199</td>
      <td>198</td>
      <td>3</td>
      <td>11.7</td>
      <td>6.2</td>
    </tr>
    <tr>
      <th>1990-01-01 12:00:00-05:00</th>
      <td>261</td>
      <td>260</td>
      <td>3</td>
      <td>11.7</td>
      <td>5.2</td>
    </tr>
    <tr>
      <th>1990-01-01 13:00:00-05:00</th>
      <td>155</td>
      <td>155</td>
      <td>0</td>
      <td>11.7</td>
      <td>5.2</td>
    </tr>
    <tr>
      <th>1990-01-01 14:00:00-05:00</th>
      <td>144</td>
      <td>144</td>
      <td>2</td>
      <td>11.7</td>
      <td>3.1</td>
    </tr>
    <tr>
      <th>1990-01-01 15:00:00-05:00</th>
      <td>131</td>
      <td>131</td>
      <td>1</td>
      <td>11.1</td>
      <td>4.1</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</div>
<div class="section" id="Plotting-time-series-data-with-pandas-and-matplotlib">
<h2>Plotting time series data with pandas and matplotlib<a class="headerlink" href="#Plotting-time-series-data-with-pandas-and-matplotlib" title="Permalink to this headline">¶</a></h2>
<p>Let’s make some plots to get a better idea of what TMY data gives us.</p>
<div class="section" id="Plotting-Irradiance">
<h3>Plotting Irradiance<a class="headerlink" href="#Plotting-Irradiance" title="Permalink to this headline">¶</a></h3>
<p>First, the three irradiance fields:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">first_week</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">24</span><span class="o">*</span><span class="mi">7</span><span class="p">)</span>  <span class="c1"># Plotting 7 days, each one has 24 hours or entries</span>
<span class="n">first_week</span><span class="p">[[</span><span class="s1">&#39;GHI&#39;</span><span class="p">,</span> <span class="s1">&#39;DHI&#39;</span><span class="p">,</span> <span class="s1">&#39;DNI&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Irradiance [W/m$^2$]&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/nb_tutorial1_22_0.png" src="../_images/nb_tutorial1_22_0.png" />
</div>
</div>
<p>GHI, DHI, and DNI are the three “basic” ways of measuring irradiance, although each of them is measured in units of power per area (watts per square meter):</p>
<ul class="simple">
<li><p>GHI: Global Horizontal Irradiance; the total sunlight intensity falling on a horizontal plane</p></li>
<li><p>DHI: Diffuse Horizontal Irradiance; the subset of sunlight falling on a horizontal plane that isn’t coming directly from the sun (e.g., the light that makes the sky blue)</p></li>
<li><p>DNI: Direct Normal Irradiance; the subset of sunlight coming directly from the sun</p></li>
</ul>
<p><img alt="t1_GHI" src="../_images/t1_GHI.PNG" /></p>
<p><img alt="t1_DHI" src="../_images/t1_DHI.PNG" /></p>
<p><img alt="t1_DNI" src="../_images/t1_DNI.PNG" /></p>
<p>Later tutorials will show how these three values are used in PV modeling. For now, let’s just get a qualitative understanding of the differences between them: looking at the above plot, there is a pattern where when DNI is high, DHI is low. The sun puts out a (roughly) constant amount of energy, which means photons either make it through the atmosphere without scattering and are counted as direct irradiance, or they tend to get scattered and become part of the diffuse irradiance, but not both.
Looking at DNI makes it easy to pick out which hours are cloud and which are sunny – most days in January are rather overcast with low irradiance, but the sun does occasionally break through.</p>
<p>In addition to daily variation, there is also seasonal variation in irradiance. Let’s compare a winter week with a summer week, using pandas to select out a summertime subset. Notice the increased intensity in summer – GHI peaks around 900 W/m^2, whereas in winter the maximum was more like 500 W/m^2.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">summer_week</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;1990-06-01&#39;</span><span class="p">:</span><span class="s1">&#39;1990-06-08&#39;</span><span class="p">]</span>
<span class="n">summer_week</span><span class="p">[[</span><span class="s1">&#39;GHI&#39;</span><span class="p">,</span> <span class="s1">&#39;DHI&#39;</span><span class="p">,</span> <span class="s1">&#39;DNI&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Irradiance [W/m$^2$]&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/nb_tutorial1_27_0.png" src="../_images/nb_tutorial1_27_0.png" />
</div>
</div>
</div>
<div class="section" id="Plotting-Temperature">
<h3>Plotting Temperature<a class="headerlink" href="#Plotting-Temperature" title="Permalink to this headline">¶</a></h3>
<p>Next up is temperature:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">first_week</span><span class="p">[</span><span class="s1">&#39;DryBulb&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Ambient Temperature [°C]&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/nb_tutorial1_29_0.png" src="../_images/nb_tutorial1_29_0.png" />
</div>
</div>
</div>
<div class="section" id="Plotting-Wind-speed">
<h3>Plotting Wind speed<a class="headerlink" href="#Plotting-Wind-speed" title="Permalink to this headline">¶</a></h3>
<p>And finally, wind speed:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">first_week</span><span class="p">[</span><span class="s1">&#39;Wspd&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Wind Speed [m/s]&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/nb_tutorial1_31_0.png" src="../_images/nb_tutorial1_31_0.png" />
</div>
</div>
</div>
</div>
<div class="section" id="Aggregating-hourly-data-to-monthly-summaries">
<h2>Aggregating hourly data to monthly summaries<a class="headerlink" href="#Aggregating-hourly-data-to-monthly-summaries" title="Permalink to this headline">¶</a></h2>
<p>Pandas makes it easy to roll-up timeseries data into summary values. For example, we can calculate total monthly GHI as a quick way to visualize the seasonality of solar resource:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># summing hourly irradiance (W/m^2) gives insolation (W h/m^2)</span>
<span class="n">monthly_ghi</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;GHI&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">monthly_ghi</span> <span class="o">=</span> <span class="n">monthly_ghi</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>  <span class="c1"># don&#39;t need timezone for monthly data</span>
<span class="n">monthly_ghi</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">bar</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Monthly Global Horizontal Irradiance</span><span class="se">\n</span><span class="s1">[W h/m$^2$]&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/nb_tutorial1_33_0.png" src="../_images/nb_tutorial1_33_0.png" />
</div>
</div>
<p>We can also take monthly averages instead of monthly sums:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">monthly_average_temp_wind</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;DryBulb&#39;</span><span class="p">,</span> <span class="s1">&#39;Wspd&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">monthly_average_temp_wind</span><span class="o">.</span><span class="n">plot</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/nb_tutorial1_35_0.png" src="../_images/nb_tutorial1_35_0.png" />
</div>
</div>
</div>
<div class="section" id="Where-to-get-Solar-Irradiance-Data">
<h2>Where to get Solar Irradiance Data<a class="headerlink" href="#Where-to-get-Solar-Irradiance-Data" title="Permalink to this headline">¶</a></h2>
<p>There are many different sources of solar irradiance data. For your projects, these are some of the most common:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://nsrdb.nrel.gov/data-sets/archives.html">TMY3/TMY2</a> - like the data we loaded earlier on this example. This database of TMY3 <code class="docutils literal notranslate"><span class="pre">.csv</span></code> files and TMY2 files have been archived by NREL.</p></li>
<li><p><a class="reference external" href="https://maps.nrel.gov/nsrdb-viewer/">NSRDB</a> - National Solar Radiation Database. You can access data through the website for many locations accross the world, or you can use their <a class="reference external" href="https://developer.nrel.gov/docs/solar/nsrdb/">web API</a> to download data programmatically. An “API” is an <a class="reference external" href="https://en.wikipedia.org/wiki/API">“application programming interface”</a>, and a “web API” is a programming interface that allows you to write code to interact with web services like the NSRDB.</p></li>
<li><p><a class="reference external" href="https://www.energy.gov/eere/buildings/downloads/energyplus-0">EPW</a> - Energy Plus Weather data is available for many locations accross the world. It’s in its own format file (‘EPW’) so you can’t open it easily in a spreadsheet program like Excel, but you can use <code class="docutils literal notranslate"><span class="pre">`pvlib.iotools.read_epw()</span></code> &lt;<a class="reference external" href="https://pvlib-python.readthedocs.io/en/stable/generated/pvlib.iotools.read_epw.html">https://pvlib-python.readthedocs.io/en/stable/generated/pvlib.iotools.read_epw.html</a>&gt;`__ to get it into a dataframe and use it.</p></li>
<li><p><a class="reference external" href="https://ec.europa.eu/jrc/en/pvgis">PVGIS</a> - Free global weather data provided by the European Union and derived from many govermental agencies including the NSRDB. PVGIS also provides a web API. You can get PVGIS TMY data using <code class="docutils literal notranslate"><span class="pre">`pvlib.iotools.get_pvgis_tmy()</span></code> &lt;<a class="reference external" href="https://pvlib-python.readthedocs.io/en/stable/generated/pvlib.iotools.get_pvgis_tmy.html">https://pvlib-python.readthedocs.io/en/stable/generated/pvlib.iotools.get_pvgis_tmy.html</a>&gt;`__.</p></li>
<li><p>Perhaps another useful link: <a class="reference external" href="https://sam.nrel.gov/weather-data.html">https://sam.nrel.gov/weather-data.html</a></p></li>
</ul>
<p><img alt="tutorial_1_NSRDB_example" src="../_images/tutorial_1_NSRDB_example.PNG" /></p>
<div class="section" id="Fetching-TMYs-from-the-NSRDB">
<h3>Fetching TMYs from the NSRDB<a class="headerlink" href="#Fetching-TMYs-from-the-NSRDB" title="Permalink to this headline">¶</a></h3>
<p>The example TMY dataset used here is from an airport in North Carolina, but what if we wanted to model a PV system somewhere else? The NSRDB, one of many sources of weather data intended for PV modeling, is free and easy to access using pvlib. As an example, we’ll fetch a TMY dataset for Albuquerque, New Mexico at coordinates <a class="reference external" href="https://www.google.com/maps/&#64;35.0844,-106.6504,9z">(35.0844, -106.6504)</a>. We use
<code class="docutils literal notranslate"><span class="pre">`pvlib.iotools.get_psm3()</span></code> &lt;<a class="reference external" href="https://pvlib-python.readthedocs.io/en/stable/generated/pvlib.iotools.get_psm3.html">https://pvlib-python.readthedocs.io/en/stable/generated/pvlib.iotools.get_psm3.html</a>&gt;`__ which returns a Python dictionary of metadata and a Pandas dataframe of the timeseries weather data.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">metadata</span><span class="p">,</span> <span class="n">df_abq</span> <span class="o">=</span> <span class="n">pvlib</span><span class="o">.</span><span class="n">iotools</span><span class="o">.</span><span class="n">get_psm3</span><span class="p">(</span>
    <span class="n">latitude</span><span class="o">=</span><span class="mf">35.0844</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=-</span><span class="mf">106.6504</span><span class="p">,</span>
    <span class="n">api_key</span><span class="o">=</span><span class="s1">&#39;DEMO_KEY&#39;</span><span class="p">,</span>  <span class="c1"># OK for this demo, but better to get your own key</span>
    <span class="n">email</span><span class="o">=</span><span class="s1">&#39;silvanaa@gmail.com&#39;</span><span class="p">,</span>
    <span class="n">names</span><span class="o">=</span><span class="s1">&#39;tmy&#39;</span><span class="p">)</span>
<span class="n">metadata</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>{&#39;Source&#39;: &#39;NSRDB&#39;,
 &#39;Location ID&#39;: &#39;94139&#39;,
 &#39;City&#39;: &#39;-&#39;,
 &#39;State&#39;: &#39;-&#39;,
 &#39;Country&#39;: &#39;-&#39;,
 &#39;Latitude&#39;: 35.09,
 &#39;Longitude&#39;: -106.66,
 &#39;Time Zone&#39;: -7,
 &#39;Elevation&#39;: 1496,
 &#39;Local Time Zone&#39;: -7,
 &#39;Dew Point Units&#39;: &#39;c&#39;,
 &#39;DHI Units&#39;: &#39;w/m2&#39;,
 &#39;DNI Units&#39;: &#39;w/m2&#39;,
 &#39;GHI Units&#39;: &#39;w/m2&#39;,
 &#39;Temperature Units&#39;: &#39;c&#39;,
 &#39;Pressure Units&#39;: &#39;mbar&#39;,
 &#39;Wind Direction Units&#39;: &#39;Degrees&#39;,
 &#39;Wind Speed&#39;: &#39;m/s&#39;,
 &#39;Surface Albedo Units&#39;: &#39;N/A&#39;,
 &#39;Version&#39;: &#39;3.1.1&#39;}
</pre></div>
</div>
</div>
<p>TMY datasets from the PSM3 service of the NSRDB are timestamped using the real year that the measurements came from. The <code class="docutils literal notranslate"><span class="pre">`pvlib.iotools.read_tmy3()</span></code> &lt;<a class="reference external" href="https://pvlib-python.readthedocs.io/en/stable/generated/pvlib.iotools.read_tmy3.html">https://pvlib-python.readthedocs.io/en/stable/generated/pvlib.iotools.read_tmy3.html</a>&gt;`__ function had a <code class="docutils literal notranslate"><span class="pre">coerce_year</span></code> argument to force everything to align to a single dummy year, but <code class="docutils literal notranslate"><span class="pre">pvlib.iotools.get_psm3()</span></code> doesn’t have that feature. For convenience let’s standardize the data to 1990 and then compare monthly GHI to the North Carolina
location:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">df_abq</span><span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1990</span>
<span class="n">df_abq</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df_abq</span><span class="p">[[</span><span class="s1">&#39;Year&#39;</span><span class="p">,</span> <span class="s1">&#39;Month&#39;</span><span class="p">,</span> <span class="s1">&#39;Day&#39;</span><span class="p">,</span> <span class="s1">&#39;Hour&#39;</span><span class="p">]])</span>

<span class="n">ghi_comparison</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s1">&#39;NC&#39;</span><span class="p">:</span> <span class="n">monthly_ghi</span><span class="p">,</span>  <span class="c1"># using the monthly values from earlier</span>
    <span class="s1">&#39;NM&#39;</span><span class="p">:</span> <span class="n">df_abq</span><span class="p">[</span><span class="s1">&#39;GHI&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span>
<span class="p">})</span>

<span class="n">ghi_comparison</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">bar</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Monthly GHI [W h/m^2]&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/nb_tutorial1_41_0.png" src="../_images/nb_tutorial1_41_0.png" />
</div>
</div>
<p>It’s not too surprising to see that our New Mexico location is significantly sunnier than the one in North Carolina.</p>
<p>This work is licensed under a Creative Commons Attribution 4.0 International License.</p>
</div>
</div>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="tutorial0.html" title="previous page">Welcome!</a>
    <a class='right-next' id="next-link" href="tutorial2.html" title="next page">Tutorial 2 - POA Irradiance</a>

              </div>
              
          </main>
          

      </div>
    </div>
  
  <script src="../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  <footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2021, Silvana Ayala, Mark Mikofski, Kevin Anderson.<br/>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.0.1.<br/>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>